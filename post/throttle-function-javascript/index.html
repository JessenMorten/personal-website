<!DOCTYPE html><html lang="en"><head><!-- General--><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- SEO--><title>Throttle function calls in JavaScript | mortenjessen.dk</title><meta name="description" content="Throttling calls to a function will ensure that the function doesn't get called more often than we want it to."><!-- Twitter SEO--><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Throttle function calls in JavaScript"><meta name="twitter:description" content="Throttling calls to a function will ensure that the function doesn't get called more often than we want it to."><meta name="twitter:site" content="@mortenjessen5d"><meta name="twitter:image" content="https://mortenjessen.dk/images/stop.jpg"><!-- Stylesheets--><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/github.min.css"><link rel="stylesheet" href="https://mortenjessen.dk/style.css"><!-- Scripts--><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script><script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D" crossorigin="anonymous" async></script></head><body><header class="fixed-top" id="tosp"><nav class="navbar navbar-light bg-white shadow"><div class="container"><a class="navbar-brand text-primary" href="https://mortenjessen.dk">mortenjessen.dk</a><a class="text-decoration-none" href="https://mortenjessen.dk/search/">Search</a></div></nav></header><main class="container my-5" id="top"><div class="py-3"><div class="row"><div class="mt-3 col-12 col-md-8 col-lg-9"><div class="bg-white shadow rounded"><img class="large-thumbnail" src="https://mortenjessen.dk/images/stop.jpg" alt="thumbnail"><div class="p-3"><h3>Throttle function calls in JavaScript</h3><h6 class="mb-2 text-muted">JavaScript</h6><p class="mb-2 text-muted">March 6, 2022</p><i><h6>Throttling calls to a function will ensure that the function doesn't get called more often than we want it to.</h6></i><hr><p>The throttle function is a <a href="https://mortenjessen.dk/post/higher-order-functions-javascript">higher-order function</a>
that is very similar to the <a href="https://mortenjessen.dk/post/debounce-function-javascript">debounce function</a>,
but there's a subtle difference. While the debounce function waits a specified amount of time before invoking the function,
the throttle function will invoke the function immediatly. It will however ignore any additional invokations that occur within the
specified timespan since the last invokation.</p><h4>Usage example</h4><p>Imagine we're building a website where users can <a href="https://en.wikipedia.org/wiki/List_of_Facebook_features#Poke" target="_blank">poke</a> each other, and when they do, the recipient will
get a push notification, telling them that they were poked. To prevent users from <a href="https://en.wikipedia.org/wiki/Spamming" target="_blank">spamming</a>
each other we can use the throttle function. In the example below you can only poke your friend once every 2 seconds.
If you click the button more often than that it will be ignored. Try it out for yourself:</p><div class="my-3 p-3 border border-primary rounded mx-auto shadow" style="max-width:500px"><h5>Throttle poke example</h5><p>Click the button to poke a friend.</p><button class="btn btn-primary" id="poke-button">Poke</button><span>&nbsp;You've poked your friend&nbsp;<b><span class="text-primary" id="poke-count">0</span></b>&nbsp;time(s).</span></div><script>// Elements
const pokeButton = document.getElementById("poke-button");
const pokeCount = document.getElementById("poke-count");

// State
let numberOfPokes = 0;

/**
* Throttles a function.
*/
function throttle(func, milliseconds) {
    let throttled = false;

    return function (...arguments) {
        if (!throttled) {
            throttled = true;
            func(...arguments);
            setTimeout(() => throttled = false, milliseconds);
        }
    }
}

/**
* Pokes a friend.
*/
function poke() {
    numberOfPokes++;
    pokeCount.textContent = numberOfPokes;
}

// Wrap the poke function with the throttle function
const throttledPoke = throttle(poke, 2000);

// Set event handler on button
pokeButton.onclick = () => throttledPoke();</script><h4>Implementation</h4><pre class="rounded shadow border"><span class="float-left badge bg-secondary">JavaScript</span><code class="language-javascript">// Elements
const pokeButton = document.getElementById("poke-button");
const pokeCount = document.getElementById("poke-count");

// State
let numberOfPokes = 0;

/**
* Throttles a function.
*/
function throttle(func, milliseconds) {
    let throttled = false;

    return function (...arguments) {
        if (!throttled) {
            throttled = true;
            func(...arguments);
            setTimeout(() => throttled = false, milliseconds);
        }
    }
}

/**
* Pokes a friend.
*/
function poke() {
    numberOfPokes++;
    pokeCount.textContent = numberOfPokes;
}

// Wrap the poke function with the throttle function
const throttledPoke = throttle(poke, 2000);

// Set event handler on button
pokeButton.onclick = () => throttledPoke();</code></pre></div></div></div><div class="mt-3 col-12 col-md-4 col-lg-3"><div class="bg-white shadow rounded p-3"><h5 class="mb-3">Latest posts</h5><a href="https://mortenjessen.dk/post/using-channels-as-semaphores/"><p class="m-0 mt-2 py-2 border-top">How to mimic the behavior of a semaphore using channels</p></a><a href="https://mortenjessen.dk/post/detect-dark-mode/"><p class="m-0 mt-2 py-2 border-top">Detect dark mode with JavaScript</p></a><a href="https://mortenjessen.dk/post/throttle-function-javascript/"><p class="m-0 mt-2 py-2 border-top">Throttle function calls in JavaScript</p></a><a href="https://mortenjessen.dk/post/debounce-function-javascript/"><p class="m-0 mt-2 py-2 border-top">Improve performance with the debounce function</p></a><a href="https://mortenjessen.dk/post/twitter-seo/"><p class="m-0 mt-2 py-2 border-top">Drive traffic to your website using these meta tags in your HTML</p></a><a href="https://mortenjessen.dk/post/memoize-function-javascript/"><p class="m-0 mt-2 py-2 border-top">Speed up your JavaScript functions with memoization!</p></a><a href="https://mortenjessen.dk/post/pure-function-javascript/"><p class="m-0 mt-2 py-2 border-top">What is a pure function?</p></a><a href="https://mortenjessen.dk/post/higher-order-functions-javascript/"><p class="m-0 mt-2 py-2 border-top">Higher-order functions in JavaScript</p></a></div></div></div></div></main><a class="btn btn-primary rounded position-fixed bottom-0 end-0 m-3" href="#top">To the top</a><script>const BASE_URL = "https://mortenjessen.dk";</script><script src="https://mortenjessen.dk/scripts/main.js"></script></body></html>